{% extends "base_template.html" %}
{% block content %}
  <article class="post-view">
    <h1>{{ post.title }}</h1>
    <p class="muted">Category: {{ post.category }} â€¢ Autor: {{ post.author.name }}</p>
    <div class="content">{{ post.content|safe }}</div>
  </article>

  {% if current_user.is_authenticated and current_user.id == post.author.id %}
    <hr>
    <h3>User Controls</h3>
    
    <a href="{{ url_for('edit_post', slug=post.slug) }}" class="btn btn-primary">
        Edit Post
    </a>
    
    <form action="{{ url_for('delete_post', slug=post.slug) }}" method="POST" style="display:inline;"
          onsubmit="return confirm('Are you sure you want to delete this post?');">
        
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        
        <button type="submit" class="btn btn-danger">
            Delete Post
        </button>
    </form>
{% endif %}
  {% endblock %}